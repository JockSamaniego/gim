<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:rich="http://richfaces.org/rich">
	
	<style>
		.hide-days tr[id]{
                display:none; 
		}
	</style>

	<s:decorate id="#{id}_Field" template="../layout/edit.xhtml" rendered="#{renderedWithLabel}">
		<ui:define name="label">#{messages['municipalBond.serviceDate']}:</ui:define>
		
		<rich:calendar id="#{id}_fullDate" value="#{value}" rendered="#{renderedCalendar}"
				currentDate="#{value}"
				popup="#{renderedCalendarFull}" showWeekDaysBar="false" showFooter="false"
				enableManualInput="#{renderedCalendarFull}" 
				oncurrentdateselected="#{renderedCalendarFull ? '' : 'event.rich.component.selectDate(event.rich.date)'}"
				styleClass="#{renderedCalendarFull ? '' : 'hide-days'}"
				datePattern="#{messages['common.datePattern']}" ajaxSingle="true"
				inputSize="10">
				<a:support event="onchanged" eventsQueue="gimQueue"/>
				<c:if test="#{renderedCalendarFull}">
					<a:support event="oninputchange" eventsQueue="gimQueue"/>
				</c:if>
				
		</rich:calendar>
		
		<h:selectOneMenu id="#{id}_year" value="#{year}" rendered="#{!renderedCalendar}" >
			<s:selectItems value="#{emissionYearList}" var="_year" label="#{_year}"/>
			<a:support event="onchange" eventsQueue="gimQueue"/>			
		</h:selectOneMenu>

	</s:decorate>
	
	<s:decorate id="#{id}woLabel_Field" rendered="#{!renderedWithLabel}" styleClass="center">
		<rich:calendar id="#{id}_fullDate" value="#{value}" rendered="#{renderedCalendar}"
				currentDate="#{value}"
				popup="#{renderedCalendarFull}" showWeekDaysBar="false" showFooter="false"
				enableManualInput="#{renderedCalendarFull}"
				oncurrentdateselected="#{renderedCalendarFull ? '' : 'event.rich.component.selectDate(event.rich.date)'}"
				styleClass="#{renderedCalendarFull ? '' : 'hide-days'}" 
				datePattern="#{messages['common.datePattern']}" ajaxSingle="true"
				inputSize="6"> 
				<a:support event="onchanged" eventsQueue="gimQueue"/>
				<c:if test="#{renderedCalendarFull}">
					<a:support event="oninputchange" eventsQueue="gimQueue"/>
				</c:if>
		</rich:calendar>
		
		<h:selectOneMenu id="#{id}_year" value="#{year}" rendered="#{!renderedCalendar}" >
			<s:selectItems value="#{emissionYearList}" var="_year" label="#{_year}"/>
			<a:support event="onchange" eventsQueue="gimQueue"/>
		</h:selectOneMenu>
	</s:decorate>
</ui:composition>