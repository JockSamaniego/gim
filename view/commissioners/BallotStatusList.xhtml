<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"

    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a="http://richfaces.org/a4j"
    template="../layout/template.xhtml">

<ui:define name="body">
	<ui:include src="../commissioners/fragment/StatusEditPanel.xhtml" />
    <h:form id="commissionerBallotStatusPanel" styleClass="edit">
            <h:outputText styleClass="formTitle" value="Administración de Estados de la Boleta" />
        <h:panelGrid columns="2">
        <h:panelGrid columns="1" > 
            <rich:spacer height="5" />
            <s:decorate id="registerDateField" template="../layout/edit.xhtml">
                <ui:define name="label">#{messages['infraction.registerDate']}:</ui:define>
                <h:outputText id="registerDate"
                              pattern="dd/MM/yyyy"
                              size="50"
                              maxlength="50"
                              value="#{commissionerBallotHome.instance.creationDate}"/>
            </s:decorate>

            <s:decorate id="ballotNumberField" template="../layout/edit.xhtml">
                <ui:define name="label">Número de Boleta:</ui:define>
                <h:outputText id="ballotNumber"
                              size="50"
                              maxlength="50"
                              value="#{commissionerBallotHome.instance.ballotNumber}"/>
            </s:decorate>

            <s:decorate id="inspectorIdentificationField" template="../layout/edit.xhtml">
                <ui:define name="label">Cédula del Inspector:</ui:define>
                <h:outputText id="inspectorIdentification"
                              size="50"
                              maxlength="50"
                              value="#{commissionerBallotHome.instance.inspectorIdentification}"/>
            </s:decorate>

            <s:decorate id="inspectorNameField" template="../layout/edit.xhtml">
                <ui:define name="label">Nombre del Inspector:</ui:define>
                <h:outputText id="inspectorName"
                              size="50"
                              maxlength="150"
                              value="#{commissionerBallotHome.instance.inspectorName}"/>
            </s:decorate>
            
            <s:decorate id="citationDateField" template="../layout/edit.xhtml">
                <ui:define name="label">Fecha de la Infracción:</ui:define>
                <h:outputText id="citationDate"
                              pattern="dd/MM/yyyy"
                              size="50"
                              maxlength="50"
                              value="#{commissionerBallotHome.instance.infractionDate}"/>
            </s:decorate>

            <s:decorate id="citationTimeField" template="../layout/edit.xhtml">
                <ui:define name="label">Hora de la Infracción:</ui:define>
                <h:outputText id="citationTime"
                              size="50"
                              maxlength="50"
                              value="#{commissionerBallotHome.instance.infractionTime}">
                              <s:convertDateTime type="time"/>
                </h:outputText>
            </s:decorate>

            <s:decorate id="placeField" template="../layout/edit.xhtml">
                <ui:define name="label">#{messages['infraction.place']}:</ui:define>
                <h:outputText id="place"
                              size="50"
                              maxlength="550"
                              value="#{commissionerBallotHome.instance.infractionPlace}"/>
            </s:decorate>  
         </h:panelGrid>
         
         <h:panelGrid columns="1"> 

            <s:decorate id="identificationInfractorField" template="../layout/edit.xhtml">
                <ui:define name="label">#{messages['infraction.identification']}:</ui:define>
                <h:outputText id="identificationInfractor"
                              size="50"
                              maxlength="50"
                              value="#{commissionerBallotHome.instance.infractorIdentification}"/>
            </s:decorate> 

            <s:decorate id="nameInfractorField" template="../layout/edit.xhtml">
                <ui:define name="label">#{messages['infraction.name']}:</ui:define>
                <h:outputText id="nameInfractor"
                              size="50"
                              maxlength="150"
                              value="#{commissionerBallotHome.instance.infractorName}"/>
            </s:decorate>

            <s:decorate id="licensePlateField" template="../layout/edit.xhtml" rendered="#{commissionerBallotHome.isTransitBallot()}">
                <ui:define name="label">#{messages['infraction.plate']}:</ui:define>
                <h:outputText id="licensePlate"
                              size="50"
                              maxlength="50"
                              value="#{commissionerBallotHome.instance.plate}"/>
            </s:decorate>

            <s:decorate id="articleField" template="../layout/edit.xhtml" >
                <ui:define name="label">Artículo Sancionador:</ui:define>
                <h:outputText id="article"
                              size="50"
                              maxlength="50"
                              value="#{commissionerBallotHome.instance.sanctioningArticle.article} - #{commissionerBallotHome.instance.sanctioningArticle.numeral}"/>
            </s:decorate>

            <s:decorate id="articleDetailField" template="../layout/edit.xhtml" >
                <ui:define name="label">Detalle del Artículo:</ui:define>
                <h:outputText id="articleDetail"
                              size="50"
                              maxlength="550"
                              value="#{commissionerBallotHome.instance.sanctioningArticle.detail}"/>
            </s:decorate>
            
            <s:decorate id="valueField" template="../layout/edit.xhtml" >
                <ui:define name="label">#{messages['infraction.penaltyValue']} ($):</ui:define>
                <h:outputText id="value"
                              size="50"
                              maxlength="50"
                              value="#{commissionerBallotHome.instance.sanctionValue}"/>
            </s:decorate>
            
            <s:decorate id="observationField" template="../layout/edit.xhtml" >
                <ui:define name="label">Detalle del Artículo:</ui:define>
                <h:outputText id="observation"
                              size="50"
                              maxlength="550"
                              value="#{commissionerBallotHome.instance.observations}"/>
            </s:decorate>
            
            <s:decorate id="currentStatusField" template="../layout/edit.xhtml" >
                <ui:define name="label">Estado Actual:</ui:define>
                <h:outputText id="currentStatus"
                              size="50"
                              maxlength="50"
                              value="#{commissionerBallotHome.instance.currentStatus.statusName.name}"/>
            </s:decorate>

            <br />
        </h:panelGrid>
        </h:panelGrid>
    
    <rich:panel>
        <f:facet name="header">
            <h:panelGrid columns="2" columnClasses="headerTitle,">
                <h:outputText
                    value=" Estados Encontrados (#{commissionerBallotHome.instance.status.size()>0 ? commissionerBallotHome.instance.status.size() : 0})" />
                   <a:commandButton id="createStatus"
									
									action="#{commissionerBallotHome.createCommissionerBallotStatus()}"
									reRender="statusEditPanel" ajaxSingle="true"
									eventsQueue="gimEventsQueue"
									oncomplete="Richfaces.showModalPanel('statusEditPanel',{width:600, height:500})"
									value="Crear Estado" />
            </h:panelGrid>      
        </f:facet>
    <div class="results" id="infractionSentencesList">

   			<rich:dataTable id="itemsStatus" var="_status"
   						
						value="#{commissionerBallotHome.findLastStatusForBallotInOrder()}"
						columnClasses="number, number" width="100%">
	

						<h:outputText value="#{messages['items.resultsItemNotFound']}"
							rendered="#{empty commissionerBallotHome.instance.status}" />

						<rich:column rendered="#{not empty commissionerBallotHome.instance.status}"
							styleClass="center">
							<f:facet name="header">
								<h:outputText value="Fecha de Registro" />
							</f:facet>
							<h:outputText value="#{_status.creationDate}" >
                                            <f:convertDateTime pattern="dd/MM/yyyy" />
                            </h:outputText>
						</rich:column>
						<rich:column rendered="#{not empty commissionerBallotHome.instance.status}"
							styleClass="center">
							<f:facet name="header">
								<h:outputText value="Estado" />
							</f:facet>
							<h:outputText value="#{_status.statusName.name}" />
						</rich:column>

						<rich:column rendered="#{not empty commissionerBallotHome.instance.status}"
							styleClass="left">
							<f:facet name="header">
								<h:outputText value="Usuario Registrador" />
							</f:facet>
							<h:outputText value="#{_status.responsible_user}" />
						</rich:column>

			            <rich:column rendered="#{not empty commissionerBallotHome.instance.status}"
			              styleClass="left">
			              <f:facet name="header">
			                <h:outputText value="Observación" />
			              </f:facet>
			              <h:outputText value="#{_status.observations}" />
			            </rich:column>

						<rich:column rendered="#{not empty commissionerBallotHome.instance.status}"
							styleClass="action">
							<f:facet name="header">
								<h:outputText value="#{messages['common.action']}" />
							</f:facet>

							<a:commandButton id="removeStatus"
								disabled="#{_status.statusName.code eq 'INITIATED'}"
								action="#{commissionerBallotHome.removeStatus(_status)}"
								reRender="itemsStatus" ajaxSingle="true"
								eventsQueue="gimEventsQueue"
								value="#{messages['common.delete']}" />

						</rich:column>
					</rich:dataTable>

					<div style="clear: both"></div>

    </div>
    </rich:panel>
        <div class="actionButtons">
            <h:commandButton id="save"
                          value="#{messages['common.save']}"
                         action="#{commissionerBallotHome.saveHygieneBallot()}"
                       disabled="#{!commissionerBallotHome.wired}"
                       rendered="#{!commissionerBallotHome.managed}"/>

            <h:commandButton id="update"
                          value="#{messages['common.save']}"
                         action="#{commissionerBallotHome.UpdateCommissionerBallot()}"
                       rendered="#{commissionerBallotHome.managed}"/>
             
             <s:button   id="cancelEdit1"
		                value="#{messages['common.quit']}"
		                propagation="end"
		                view="/commissioners/HygieneBallotsList.xhtml"
		                rendered="#{commissionerBallotHome.commissionerTypeCode() eq 'COMMISSIONER_HYGIENE'}" />
		    <s:button   id="cancelEdit2"
		                value="#{messages['common.quit']}"
		                propagation="end"
		                view="/commissioners/TransitBallotsList.xhtml"
		                rendered="#{commissionerBallotHome.commissionerTypeCode() eq 'COMMISSIONER_TRANSIT'}" />
		    <s:button   id="cancelEdit3"
		                value="#{messages['common.quit']}"
		                propagation="end"
		                view="/commissioners/OrnamentBallotsList.xhtml"
		                rendered="#{commissionerBallotHome.commissionerTypeCode() eq 'COMMISSIONER_ORNAMENT'}" />
		    <s:button   id="cancelEdit4"
		                value="#{messages['common.quit']}"
		                propagation="end"
		                view="/commissioners/AmbientBallotsList.xhtml"
		                rendered="#{commissionerBallotHome.commissionerTypeCode() eq 'COMMISSIONER_AMBIENT'}" />

        </div>
    </h:form>
</ui:define>

</ui:composition>
