<p:document xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://jboss.com/products/seam/pdf"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:c="http://java.sun.com/jstl/core"
	title="#{messages['VehiclesBinnacleCRVReport']}" subject="report" type="pdf" orientation="landscape"
	pageSize="A4" margins="20 20 20 10" author="Municipio de Loja"
	creator="Municipio de Loja">

	<f:facet name="header">
		<p:font size="9" name="HELVETICA">
			<p:header borderWidthTop="0" borderWidthBottom="0" alignment="center">
				<p:paragraph>
					<p:table columns="2" widthPercentage="100" spacingAfter="10"
						widths="0.3 5">
						<f:facet name="defaultCell">
							<p:cell borderWidth="0" />
						</f:facet>
						<p:cell>
							<p:image value="#{gim.institution.logo}" alignment="center" widht="1" height="1">
                                <s:transformImageSize height="70" maintainRatio="true"/>
                            </p:image>
                        </p:cell>
						<p:cell>
							<p:font size="8" style="bold">
								<p:paragraph alignment="center">#{gim.institution.name.toUpperCase()}</p:paragraph>
							</p:font>

							<p:font size="7" style="bold">
								<p:paragraph alignment="center">#{gim.institution.address}. #{messages['institution.phone']}: #{gim.institution.phone} -  #{messages['institution.fax']}: #{gim.institution.fax}</p:paragraph>
							</p:font>

							<p:font size="8" style="bold">
								<p:paragraph alignment="center">#{messages['VehiclesBinnacleCRVReport']}</p:paragraph>
							</p:font>
						</p:cell>
					</p:table>
				</p:paragraph>
			</p:header>
			<p:footer borderWidthTop="0.5" borderColorTop="blue"
				borderWidthBottom="0.2" alignment="center">
	 			[<p:pageNumber />]
			</p:footer>
		</p:font>
	</f:facet>

    <p:font size="8" name="HELVETICA">
        <p:table columns="2" widthPercentage="100" headerRows="0" widths="1 1"
            spacingAfter="5">
            <f:facet name="defaultCell">
                <p:cell borderWidth="0" />
            </f:facet>

            <p:cell colspan="1">
                <p:paragraph>
                    <p:font size="8" style="bold">
                        <p:text value="#{messages['user']}: " />
                    </p:font>
                    <p:font size="8">
                        <p:text value="#{userSession.user.resident.name}" />
                    </p:font>
                </p:paragraph>
            </p:cell>

            <p:cell colspan="1">
                <p:paragraph alignment="right" spacingAfter="10">
                    <p:font size="8" name="HELVETICA" style="bold">
                        <p:text value="#{messages['common.date']}: " />
                    </p:font>
                    <p:font size="8">
                        <p:text value="#{currentDatetime}">
                            <f:convertDateTime pattern="#{messages['common.dateFullTimePattern']}" />
                        </p:text>
                    </p:font>
                </p:paragraph>
            </p:cell>
        </p:table>

        <p:table columns="4" widthPercentage="100" headerRows="0" widths="1 1 1 1"
            spacingAfter="10">
            <f:facet name="defaultCell">
                <p:cell borderWidth="0" />
            </f:facet>
            <p:cell colspan="1">
                <p:paragraph>
                    <p:font size="8" style="bold">
                        <p:text value="Filtro de Fecha: " />
                    </p:font>
                    <p:font size="8">
                        <p:text value="#{reportBinnacleCRVHome.dateSelected.equalsIgnoreCase('ingreso') ? 'Fecha de Ingreso' : 'Fecha de Salida'}" />
                    </p:font>
                </p:paragraph>
            </p:cell>

            <p:cell colspan="1">
                <p:paragraph>
                    <p:font size="8" style="bold">
                        <p:text value="#{messages['reportBinnacleCRV.startDate']}: " />
                    </p:font>
                    <p:font size="8">
                        <p:text value="#{reportBinnacleCRVHome.startDate}" >
                            <f:convertDateTime pattern="#{messages['common.datePattern']}" />
                        </p:text>
                    </p:font>
                </p:paragraph>
            </p:cell>

            <p:cell colspan="1">
                <p:paragraph>
                    <p:font size="8" style="bold">
                        <p:text value="#{messages['reportBinnacleCRV.endDate']}: " />
                    </p:font>
                    <p:font size="8">
                        <p:text value="#{reportBinnacleCRVHome.endDate}" >
                            <f:convertDateTime pattern="#{messages['common.datePattern']}" />
                        </p:text>
                    </p:font>
                </p:paragraph>
            </p:cell>

            <p:cell colspan="1">
                <p:paragraph>
                    <p:font size="8" style="bold">
                        <p:text value="#{messages['reportBinnacleCRV.vehicle']}: " />
                    </p:font>
                    <p:font size="8">
                        <p:text value="#{reportBinnacleCRVHome.vehicle}" />
                    </p:font>
                </p:paragraph>
            </p:cell>
        </p:table>

		<p:table rendered="#{not empty reportBinnacleCRVHome.list}" columns="13"
			widthPercentage="100" headerRows="0" widths="1.2 1.5 1.5 1.5 2.5 2 2.5 2.5 2 1 1 1.7 1">
			<p:font size="8" style="bold">
				<f:facet name="defaultCell">
					<p:cell borderWidth="0" />
				</f:facet>

				<p:cell horizontalAlignment="center">
					<p:paragraph>
						<p:text value="#{messages['binnacleCRV.serialNumber']}" />
					</p:paragraph>
				</p:cell>

                <p:cell horizontalAlignment="center">
                    <p:paragraph>
                        <p:text value="#{messages['binnacleCRV.admissionDate']}" />
                    </p:paragraph>
                </p:cell>

                <p:cell horizontalAlignment="center">
                    <p:paragraph>
                        <p:text value="#{messages['arrivalHistory.exitDate']}" />
                    </p:paragraph>
                </p:cell>

				<p:cell horizontalAlignment="center">
					<p:paragraph>
						<p:text value="#{messages['binnacleCRV.licensePlate']}" />
					</p:paragraph>
				</p:cell>

				<p:cell horizontalAlignment="center">
					<p:paragraph>
						<p:text value="#{messages['binnacleCRV.model']}" />
					</p:paragraph>
				</p:cell>

				<p:cell horizontalAlignment="center">
					<p:paragraph>
						<p:text value="#{messages['binnacleCRV.ownerIdentification']}" />
					</p:paragraph>
				</p:cell>

                <p:cell horizontalAlignment="center">
                    <p:paragraph>
                        <p:text value="#{messages['binnacleCRV.ownerName']}" />
                    </p:paragraph>
                </p:cell>

                <p:cell horizontalAlignment="center">
                    <p:paragraph>
                        <p:text value="#{messages['binnacleCRV.chassis']}" />
                    </p:paragraph>
                </p:cell>

                <p:cell horizontalAlignment="center">
                    <p:paragraph>
                        <p:text value="#{messages['binnacleCRV.motor']}" />
                    </p:paragraph>
                </p:cell>

                <p:cell horizontalAlignment="center">
                    <p:paragraph>
                        <p:text value="#{messages['binnacleCRV.type']}" />
                    </p:paragraph>
                </p:cell>

                <p:cell horizontalAlignment="center">
                    <p:paragraph>
                        <p:text value="#{messages['binnacleCRV.tonnage']}" />
                    </p:paragraph>
                </p:cell>

                <p:cell horizontalAlignment="center">
                    <p:paragraph>
                        <p:text value="#{messages['binnacleCRV.admissionCategory']}" />
                    </p:paragraph>
                </p:cell>

                <p:cell horizontalAlignment="center">
                    <p:paragraph>
                        <p:text value="#{messages['reportBinnacleCRV.days']}" />
                    </p:paragraph>
                </p:cell>

			</p:font>

			<ui:repeat value="#{reportBinnacleCRVHome.list}" var="_obj">
				<p:font size="8">
					<p:cell horizontalAlignment="right">
						<p:paragraph>
							<p:text value="#{messages[_obj.serialNumber]}"/>
						</p:paragraph>
					</p:cell>

                    <p:cell horizontalAlignment="center">
                        <p:paragraph>
                            <p:text value="#{_obj.lastArrivalHistoryBinnacleCRV.arrivalDate}" >
                                <f:convertDateTime pattern="#{messages['common.datePattern']}" />
                            </p:text>
                        </p:paragraph>
                    </p:cell>

                    <p:cell horizontalAlignment="center">
                        <p:paragraph>
                            <p:text value="#{_obj.lastArrivalHistoryBinnacleCRV.exitDate}" >
                                <f:convertDateTime pattern="#{messages['common.datePattern']}" />
                            </p:text>
                        </p:paragraph>
                    </p:cell>

					<p:cell horizontalAlignment="left">
						<p:paragraph>
							<p:text value="#{_obj.licensePlate}" />
						</p:paragraph>
					</p:cell>

					<p:cell horizontalAlignment="left">
						<p:paragraph>
							<p:text value="#{_obj.model}" />
						</p:paragraph>
					</p:cell>

                    <p:cell horizontalAlignment="left">
                        <p:paragraph>
                            <p:text value="#{_obj.ownerIdentification}" />
                        </p:paragraph>
                    </p:cell>

                    <p:cell horizontalAlignment="left">
                        <p:paragraph>
                            <p:text value="#{_obj.ownerName}" />
                        </p:paragraph>
                    </p:cell>

                    <p:cell horizontalAlignment="left">
                        <p:paragraph>
                            <p:text value="#{_obj.chassis}" />
                        </p:paragraph>
                    </p:cell>

                    <p:cell horizontalAlignment="left">
                        <p:paragraph>
                            <p:text value="#{_obj.motor}" />
                        </p:paragraph>
                    </p:cell>

                    <p:cell horizontalAlignment="center">
                        <p:paragraph>
                            <p:text value="#{_obj.type}" />
                        </p:paragraph>
                    </p:cell>

                    <p:cell horizontalAlignment="right">
                        <p:paragraph>
                            <p:text value="#{_obj.tonnage}">
                                <f:convertNumber pattern="#0.00" />
                            </p:text>
                        </p:paragraph>
                    </p:cell>

                    <p:cell horizontalAlignment="left">
                        <p:paragraph>
                            <p:text value="#{_obj.admissionCategory.name}" />
                        </p:paragraph>
                    </p:cell>

                    <p:cell horizontalAlignment="right">
                        <p:paragraph>
                            <p:text value="#{reportBinnacleCRVHome.calculateDays(_obj)}" />
                        </p:paragraph>
                    </p:cell>

				</p:font>
			</ui:repeat>
		</p:table>
	</p:font>
</p:document>