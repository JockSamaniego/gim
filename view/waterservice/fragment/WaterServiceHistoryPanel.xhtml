<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.org/schema/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">

	
	<s:decorate id="waterServiceHistoryPanel" template="../../layout/edit.xhtml">
		<ui:define name="label">#{messages['waterservice.serviceNumber']}:</ui:define>
		<h:inputText id="value" value="#{waterMeterHome.serviceNumber}"
			styleClass="left">
			<a:support event="onblur" eventsQueue="gimQueue"
				reRender="value" />
		</h:inputText>
	</s:decorate>
	
	<div class="actionButtons">
            <h:commandButton id="search" value="#{messages['common.search']}" reRender="waterServiceHistoryTable">
            </h:commandButton>
    </div>
    
    <rich:spacer height="20px"></rich:spacer>

	<rich:dataTable id="waterServiceHistoryTable"
		value="#{waterMeterHome.findWaterServiceHistory()}" var="_history"
		rowClasses="rvgRowOne,rvgRowTwo" columnClasses="tableCellFont"
		style="margin-top:5px;"
		rendered="#{waterMeterHome.findWaterServiceHistory().size()>0}">
		<rich:column styleClass="action" style="align:right;">
            <f:facet name="header">#{messages['waterservice.routeOrder']}
            </f:facet>
            <h:outputText value="#{_history.routeOrder}"/>
        </rich:column>
        <rich:column styleClass="action" style="align:right;">
            <f:facet name="header">
                #{messages['waterservice.serviceNumber']}
            </f:facet>
            <h:outputText value="#{_history.serviceNumber}"/>
        </rich:column>
        <rich:column styleClass="action" style="align:right;">
            <f:facet name="header">
                #{messages['waterservice.serviceOwner']}
            </f:facet>
            <h:outputText value="#{_history.serviceOwner}"/>
        </rich:column>
        <rich:column styleClass="action" style="align:right;">
            <f:facet name="header">
               #{messages['waterservice.recipeOwner']}
            </f:facet>
            <h:outputText value="#{_history.recipeOwner}"/>
        </rich:column>
        <rich:column styleClass="action" style="align:right;">
            <f:facet name="header">
               #{messages['waterservice.date']}
            </f:facet>
            <h:outputText value="#{_history.date}">
            	<f:convertDateTime pattern="#{messages['common.dateTimePattern']}"/>
            </h:outputText>
        </rich:column>
        <rich:column styleClass="action" style="align:right;">
            <f:facet name="header">
                #{messages['waterservice.userName']}
            </f:facet>
            <h:outputText value="#{_history.userName}"/>
        </rich:column>      
	        
	</rich:dataTable>

</ui:composition>
