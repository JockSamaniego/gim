<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich" xmlns:g="http://gim.gob.ec/jsf"
	template="../../layout/template.xhtml">

	<ui:define name="body">
		<h:form id="obligationsHistoryReport" styleClass="edit">
			<ui:debug id="uiDebug" />
			<rich:panel id="obligationsHistoryForm">
				<f:facet name="header">Reporte de Historial de Obligaciones
	            </f:facet>
				<s:decorate id="obligationsRadioButton"
					template="../../layout/edit.xhtml">
					<ui:define name="label">Tipo de búsqueda: </ui:define>
					<h:selectOneRadio disabled="#{municipalBondHome.reportType ne 0}"
						value="#{municipalBondHome.obligationsRadioButton}"
						required="true">
						<f:selectItem itemValue="Normal" itemLabel="Consulta Normal" />
						<f:selectItem itemValue="FotoMulta"
							itemLabel="Consulta Foto-Multa" />
					</h:selectOneRadio>
				</s:decorate>
				<s:decorate id="obligationsField" template="../../layout/edit.xhtml">
					<ui:define name="label">Criterio de búsqueda: </ui:define>
					<h:inputText id="obligation"
						disabled="#{municipalBondHome.reportType ne 0}"
						value="#{municipalBondHome.obligationsHistoryCriteria}"
						required="true">
					</h:inputText>
				</s:decorate>
				<div style="clear: both"></div>
				<div class="actionButtons">
					<a:commandButton id="generateReport"
						disabled="#{municipalBondHome.reportType ne 0}"
						value="#{messages['income.generateReport']}"
						action="#{municipalBondHome.searchObligationsHistory}"
						reRender="obligationsNormalQuery, obligationsHistoryForm" />
				</div>
			</rich:panel>


			<rich:panel id="obligationsNormalQuery" width="100%">
				<f:facet name="header">
					<h:panelGrid columns="2" columnClasses="headerTitle,">
						<h:outputText
							value="Total de resultados : #{municipalBondHome.obligationsHistoryResult.size()}" />
					</h:panelGrid>
				</f:facet>
				<div class="results" id="obligationsList">
					<rich:panel
						rendered="#{municipalBondHome.obligationsHistoryResult.size() eq 0}">
						<h:outputText value="#{messages['common.noResultsReturned']}" />
					</rich:panel>
					<rich:dataTable id="obligationsNormalTable" var="_item"
						width="100%" value="#{municipalBondHome.obligationsHistoryResult}"
						columnClasses="left, left, left, left, left, left, left, left, left, left, left"
						rendered="#{municipalBondHome.obligationsHistoryResult.size() gt 0 and municipalBondHome.reportType eq 1}">

						<rich:column>
							<f:facet name="header">
						id
							</f:facet>
							<h:outputText value="#{_item.id}" />
						</rich:column>

						<rich:column>
							<f:facet name="header">
						cédula
							</f:facet>
							<h:outputText value="#{_item.identificationNumber}" />
						</rich:column>

						<rich:column>
							<f:facet name="header">
						nombre
							</f:facet>
							<h:outputText value="#{_item.name}" />
						</rich:column>

						<rich:column>
							<f:facet name="header">
						número
							</f:facet>
							<h:outputText value="#{_item.number}" />
						</rich:column>

						<rich:column>
							<f:facet name="header">
						emisión
							</f:facet>
							<h:outputText value="#{_item.emisiondate}" />
						</rich:column>

						<rich:column styleClass="center">
							<f:facet name="header">
						expiración
							</f:facet>
							<h:outputText value="#{_item.expirationdate}" />
						</rich:column>

						<rich:column styleClass="center">
							<f:facet name="header">
						valor
							</f:facet>
							<h:outputText value="#{_item.value}" />
						</rich:column>

						<rich:column styleClass="center">
							<f:facet name="header">
						pago total
							</f:facet>
							<h:outputText value="#{_item.paidtotal}" />
						</rich:column>

						<rich:column styleClass="center">
							<f:facet name="header">
						descripción
							</f:facet>
							<h:outputText value="#{_item.description}" />
						</rich:column>

						<rich:column styleClass="center">
							<f:facet name="header">
						referencia
							</f:facet>
							<h:outputText value="#{_item.reference}" />
						</rich:column>

						<rich:column styleClass="center">
							<f:facet name="header">
						agrupación
							</f:facet>
							<h:outputText value="#{_item.groupingcode}" />
						</rich:column>

					</rich:dataTable>

					<rich:dataTable id="obligationsFotoMultaTable" var="_item"
						width="100%" value="#{municipalBondHome.obligationsHistoryResult}"
						columnClasses="left, left, left, left, left, left, left, left, left, left, left,left,left,left,left"
						rendered="#{municipalBondHome.obligationsHistoryResult.size() gt 0 and municipalBondHome.reportType eq 2}">

						<rich:column>
							<f:facet name="header">
						Id
							</f:facet>
							<h:outputText value="#{_item.id}" />
						</rich:column>

						<rich:column>
							<f:facet name="header">
						Cédula
							</f:facet>
							<h:outputText value="#{_item.identificationNumber}" />
						</rich:column>

						<rich:column>
							<f:facet name="header">
						Nombre
							</f:facet>
							<h:outputText value="#{_item.name}" />
						</rich:column>

						<rich:column>
							<f:facet name="header">
						Número
							</f:facet>
							<h:outputText value="#{_item.number}" />
						</rich:column>

						<rich:column>
							<f:facet name="header">
						Emisión
							</f:facet>
							<h:outputText value="#{_item.emisiondate}" />
						</rich:column>

						<rich:column styleClass="center">
							<f:facet name="header">
						Expiración
							</f:facet>
							<h:outputText value="#{_item.expirationdate}" />
						</rich:column>

						<rich:column styleClass="center">
							<f:facet name="header">
						Valor
							</f:facet>
							<h:outputText value="#{_item.value}" />
						</rich:column>

						<rich:column styleClass="center">
							<f:facet name="header">
						Pago total
							</f:facet>
							<h:outputText value="#{_item.paidtotal}" />
						</rich:column>

						<rich:column styleClass="center">
							<f:facet name="header">
						Descripción
							</f:facet>
							<h:outputText value="#{_item.description}" />
						</rich:column>

						<rich:column styleClass="center">
							<f:facet name="header">
						Referencia
							</f:facet>
							<h:outputText value="#{_item.reference}" />
						</rich:column>

						<rich:column styleClass="center">
							<f:facet name="header">
						Agrupación
							</f:facet>
							<h:outputText value="#{_item.groupingcode}" />
						</rich:column>

						<rich:column styleClass="center">
							<f:facet name="header">
						Placa
							</f:facet>
							<h:outputText value="#{_item.numberPlate}" />
						</rich:column>

						<rich:column styleClass="center">
							<f:facet name="header">
						Número ANT
							</f:facet>
							<h:outputText value="#{_item.antNumber}" />
						</rich:column>

						<rich:column styleClass="center">
							<f:facet name="header">
						Velocidad
							</f:facet>
							<h:outputText value="#{_item.speeding}Km/h" />
						</rich:column>

						<rich:column styleClass="center">
							<f:facet name="header">
						Citación
							</f:facet>
							<h:outputText value="#{_item.citationDate}" />
						</rich:column>

					</rich:dataTable>
				</div>

			</rich:panel>



			<h:panelGrid id="detailPanel2" columns="3">

				<s:button id="back" value="#{messages['common.back']}"
					propagation="end" view="/home.xhtml" />
				<s:button id="clean" value="Limpiar"
					propagation="end" view="/revenue/report/ObligationsHistoryReport.xhtml" />
			</h:panelGrid>
		</h:form>

	</ui:define>

</ui:composition>
