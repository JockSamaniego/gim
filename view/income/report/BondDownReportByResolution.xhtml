<p:document xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://jboss.org/schema/seam/pdf"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:s="http://jboss.org/schema/seam/taglib"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:c="http://java.sun.com/jstl/core"
	title="#{messages['bondDownStatus.titleReport']}" subject="report" type="pdf"
	pageSize="A4" margins="25 20 15 20" author="GADM-Loja"
	orientation="portrait" creator="GADM-Loja">

	<f:facet name="header">
		<p:font size="9" name="HELVETICA">
			<p:header borderWidthTop="0" borderWidthBottom="0" alignment="center">
				<p:paragraph>
					<p:table columns="2" widthPercentage="100" spacingAfter="15"
						widths="1 12">
						<f:facet name="defaultCell">
							<p:cell borderWidth="0" />
						</f:facet>
						<p:cell>
							<p:image height="1" width="1" value="/img/escudo.jpg"
								alignment="center" />
						</p:cell>
						<p:cell>
							<p:font size="8" style="bold">
								<p:paragraph alignment="center">#{gim.institution.name.toUpperCase()}</p:paragraph>
							</p:font>

							<p:font size="7" style="bold">
								<p:paragraph alignment="center">#{gim.institution.address}. #{messages['institution.phone']}: #{gim.institution.phone} -  #{messages['institution.fax']}: #{gim.institution.fax}</p:paragraph>
							</p:font>

							<p:font size="8" style="bold">
								<p:paragraph alignment="center">#{messages['bondDownStatus.titleReport']}</p:paragraph>
							</p:font>
						</p:cell>
					</p:table>
				</p:paragraph>
			</p:header>
			<p:footer borderWidthTop="1" borderColorTop="blue"
				borderWidthBottom="0" alignment="center">
	 			[<p:pageNumber />]
			</p:footer>
		</p:font>
	</f:facet>

	<p:font size="9" name="HELVETICA">

		<p:paragraph alignment="right" spacingAfter="10">
			<p:font size="8" name="HELVETICA">
				<p:text value="#{messages['common.date']}: " />
				<p:text value="#{currentDatetime}">
					<f:convertDateTime
						pattern="#{messages['common.dateFullTimePattern']}" />
				</p:text>
			</p:font>
		</p:paragraph>

		<p:table columns="1" widthPercentage="100" headerRows="0" widths="1"
			spacingAfter="10">
			<f:facet name="defaultCell">
				<p:cell borderWidth="0" />
			</f:facet>

			<p:cell colspan="1">
				<p:paragraph>
					<p:font size="8" style="bold">
						<p:text value="#{messages['common.printBy']}: " />
					</p:font>
					<p:font size="8">
						<p:text value="#{userSession.user.resident.name}" />
					</p:font>
				</p:paragraph>
			</p:cell>

			<p:cell colspan="1">
				<p:paragraph>
					<p:font size="8" style="bold">
						<p:text value="#{messages['Periodo Fiscal']}: " />
					</p:font>
					<p:font size="8">
						<p:text value="#{userSession.fiscalPeriod.name}" />
					</p:font>
				</p:paragraph>
			</p:cell>

			<p:cell colspan="1" rendered="#{statusChangeHome.viewByResolution}">
				<p:paragraph>
					<p:font size="8" style="bold">
						<p:text value="#{messages['bondDownStatus.resolutionNumber']}: " />
					</p:font>
					<p:font size="8">
						<p:text value="#{statusChangeHome.bondDownStatus.resolutionNumber}" />
					</p:font>
				</p:paragraph>
			</p:cell>

			<p:cell colspan="1" rendered="#{!statusChangeHome.viewByResolution}">
				<p:paragraph>
					<p:font size="8" style="bold">
						<p:text value="#{messages['Bajas desde']}: " />
					</p:font>
					<p:font size="8">
						<p:text value="#{statusChangeHome.startDate}">
							<f:convertDateTime pattern="#{messages['common.datePattern']}"/>
						</p:text>
					</p:font>
				</p:paragraph>
			</p:cell>

			<p:cell colspan="1" rendered="#{!statusChangeHome.viewByResolution}">
				<p:paragraph>
					<p:font size="8" style="bold">
						<p:text value="#{messages['Bajas hasta']}: " />
					</p:font>
					<p:font size="8">
						<p:text value="#{statusChangeHome.endDate}">
							<f:convertDateTime pattern="#{messages['common.datePattern']}"/>
						</p:text>
					</p:font>
				</p:paragraph>
			</p:cell>

			<p:cell colspan="1">
				<p:paragraph>
					<p:font size="8" style="bold">
						<p:text value="#{messages['bondDownStatus.resolutionTotal']}: " />
					</p:font>
					<p:font size="8">
						<p:text value="#{statusChangeHome.total}" />
					</p:font>
				</p:paragraph>
			</p:cell>

		</p:table>




		<p:table rendered="#{not empty statusChangeHome.bonds}" columns="7"
			widthPercentage="100" headerRows="0" widths="1 1 1 1 3 3.5 1.5">
			<p:font size="7" style="bold">
				<f:facet name="defaultCell">
					<p:cell borderWidth="0" />
				</f:facet>

				<p:cell horizontalAlignment="center">
					<p:paragraph>
						<p:text value="#{messages['Nro. Obligacion']}" />
					</p:paragraph>
				</p:cell>

				<p:cell horizontalAlignment="center">
					<p:paragraph>
						<p:text value="#{messages['Fecha de baja']}">
						</p:text>
					</p:paragraph>
				</p:cell>
				
				<p:cell horizontalAlignment="center">
					<p:paragraph>
						<p:text value="#{messages['Resolucion']}">
						</p:text>
					</p:paragraph>
				</p:cell>
				
				<p:cell horizontalAlignment="center">
					<p:paragraph>
						<p:text value="#{messages['Fecha emision']}">
						</p:text>
					</p:paragraph>
				</p:cell>
				
				<p:cell horizontalAlignment="center">
					<p:paragraph>
						<p:text value="#{messages['Nombre Cuenta']}" />
					</p:paragraph>
				</p:cell>

				<p:cell horizontalAlignment="center">
					<p:paragraph>
						<p:text value="#{messages['Contribuyente']}" />
					</p:paragraph>
				</p:cell>
				
				<p:cell horizontalAlignment="center">
					<p:paragraph>
						<p:text value="#{messages['Valor']}" />
					</p:paragraph>
				</p:cell>

			</p:font>

			<p:font size="7"
				style="normal">
				<ui:repeat var="_bond" value="#{statusChangeHome.bonds}">
					<p:cell horizontalAlignment="left">
						<p:paragraph>
							<p:text
								value="#{_bond.number}" />
						</p:paragraph>
					</p:cell>
	
					<p:cell horizontalAlignment="center">
						<p:paragraph>
							<p:text	value="#{_bond.reversedDate}">
								<f:convertDateTime
									pattern="#{messages['common.datePattern']}" />
							</p:text>
						</p:paragraph>
					</p:cell>
	
					<p:cell horizontalAlignment="left">
						<p:paragraph>
							<p:text	value="#{_bond.reversedResolution}"/>
						</p:paragraph>
					</p:cell>
	
					<p:cell horizontalAlignment="center">
						<p:paragraph>
							<p:text	value="#{_bond.emisionDate}">
								<f:convertDateTime
									pattern="#{messages['common.datePattern']}" />
							</p:text>
						</p:paragraph>
					</p:cell>
	
					<p:cell horizontalAlignment="left">
						<p:paragraph>
							<p:text
								value="#{_bond.entry.name}" />
						</p:paragraph>
					</p:cell>
	
					<p:cell horizontalAlignment="left">
						<p:paragraph>
							<p:text
								value="#{_bond.resident.name}" />
						</p:paragraph>
					</p:cell>
	
					<p:cell horizontalAlignment="right">
						<p:paragraph>
							<p:text
								value="#{_bond.value.add(_bond.taxesTotal)}" />
						</p:paragraph>
					</p:cell>
				</ui:repeat>
			</p:font>

		</p:table>




		<p:table rendered="#{not empty statusChangeHome.bondsDownStatusByAccount}" columns="3"
			widthPercentage="100" headerRows="0" widths="3 4 1.5">
			<p:font size="7" style="bold">
				<f:facet name="defaultCell">
					<p:cell borderWidth="0" />
				</f:facet>

				<p:cell horizontalAlignment="center">
					<p:paragraph>
						<p:text value="#{messages['Cuenta Contable']}" />
					</p:paragraph>
				</p:cell>

				<p:cell horizontalAlignment="center">
					<p:paragraph>
						<p:text value="#{messages['Nombre de Cuenta']}" />
					</p:paragraph>
				</p:cell>
			
				<p:cell horizontalAlignment="center">
					<p:paragraph>
						<p:text value="#{messages['Valor']}" />
					</p:paragraph>
				</p:cell>

			</p:font>

			<p:font size="7"
				style="normal">
				<ui:repeat var="_bond" value="#{statusChangeHome.bondsDownStatusByAccount}">
					<p:cell horizontalAlignment="left">
						<p:paragraph>
							<p:text
								value="#{_bond.account}" />
						</p:paragraph>
					</p:cell>
	
					<p:cell horizontalAlignment="left">
						<p:paragraph>
							<p:text
								value="#{_bond.accountName}" />
						</p:paragraph>
					</p:cell>
	
					<p:cell horizontalAlignment="right">
						<p:paragraph>
							<p:text
								value="#{_bond.accountTotal}" />
						</p:paragraph>
					</p:cell>
				</ui:repeat>
			</p:font>

		</p:table>

	</p:font>
	
	
	
	
	
	
	
	
	
	
	<p:table spacingBefore='10' columns="1" widthPercentage="100"
			headerRows="0"
			rendered="#{not empty workdayHome.replacementAgreements}">
			<p:font size="8" style="bold">
				<p:cell>
					<p:paragraph borderWidth="0">
						<p:font size="10" style="bold">
							<p:text value="Detalle de bajas con abonos" />
						</p:font>
					</p:paragraph>
				</p:cell>
			</p:font>
		</p:table>

		<p:table rendered="#{not empty workdayHome.replacementAgreements}"
			spacingAfter="15" columns="7" widthPercentage="100" headerRows="0"
			widths="3 1 3 1 0.7 0.7 0.7">
			<p:font size="7" style="bold">
				<f:facet name="defaultCell">
					<p:cell borderWidth="0" />
				</f:facet>

				<p:cell horizontalAlignment="center">
					<p:paragraph>
						<p:text value="#{messages['entry']}" />
					</p:paragraph>
				</p:cell>

				<p:cell horizontalAlignment="center">
					<p:paragraph>
						<p:text value="#{messages['resident.identificationNumber']}" />
					</p:paragraph>
				</p:cell>

				<p:cell horizontalAlignment="center">
					<p:paragraph>
						<p:text value="#{messages['resident.name']}" />
					</p:paragraph>
				</p:cell>

				<p:cell horizontalAlignment="center">
					<p:paragraph>
						<p:text value="#{messages['municipalBond.emisionDate']}" />
					</p:paragraph>
				</p:cell>

				<p:cell horizontalAlignment="center">
					<p:paragraph>
						<p:text value="#{messages['municipalBond.number']}" />
					</p:paragraph>
				</p:cell>

				<p:cell horizontalAlignment="center">
					<p:paragraph>
						<p:text value="#{messages['municipalBond.value']}" />
					</p:paragraph>
				</p:cell>

				<p:cell horizontalAlignment="center">
					<p:paragraph>
						<p:text value="#{messages['replacementPaymentAgreement.title']}" />
					</p:paragraph>
				</p:cell>
			</p:font>

			<p:font size="6" style="bold">
				<ui:repeat value="#{workdayHome.replacementAgreements}"
					var="_replacement">
					<p:cell>
						<p:paragraph>
							<p:text value="#{_replacement.ent_name}" />
						</p:paragraph>
					</p:cell>

					<p:cell>
						<p:paragraph>
							<p:text value="#{_replacement.identificationnumber}" />
						</p:paragraph>
					</p:cell>

					<p:cell>
						<p:paragraph>
							<p:text value="#{_replacement.name_resident}" />
						</p:paragraph>
					</p:cell>

					<p:cell horizontalAlignment="center">
						<p:paragraph>
							<p:text value="#{_replacement.mb_emisiondate}">
								<f:convertDateTime pattern="#{messages['common.datePattern']}" />
							</p:text>
						</p:paragraph>
					</p:cell>

					<p:cell>
						<p:paragraph>
							<p:text value="#{_replacement.mb_number}" />
						</p:paragraph>
					</p:cell>

					<p:cell horizontalAlignment="right">
						<p:paragraph>
							<p:text value="#{_replacement.mb_value}">
								<f:convertNumber pattern="$ ####.00" />
							</p:text>
						</p:paragraph>
					</p:cell>

					<p:cell horizontalAlignment="right">
						<p:paragraph>
							<p:text value="#{_replacement.replacement_total}">
								<f:convertNumber pattern="$ ####.00" />
							</p:text>
						</p:paragraph>
					</p:cell>

				</ui:repeat>
			</p:font>
		</p:table>









		<p:table spacingBefore='10' columns="1" widthPercentage="100"
			headerRows="0"
			rendered="#{not empty workdayHome.replacementAccountDTOs}">
			<p:font size="8" style="bold">
				<p:cell>
					<p:paragraph borderWidth="0">
						<p:font size="10" style="bold">
							<p:text value="Detalle de bajas con abonos - Cuentas Contables" />
						</p:font>
					</p:paragraph>
				</p:cell>
			</p:font>
		</p:table>

		<p:table rendered="#{not empty workdayHome.replacementAccountDTOs}"
			spacingAfter="15" columns="3" widthPercentage="100" headerRows="0"
			widths="4 4 2">
			<p:font size="7" style="bold">
				<f:facet name="defaultCell">
					<p:cell borderWidth="0" />
				</f:facet>

				<p:cell horizontalAlignment="center">
					<p:paragraph>
						<p:text value="#{messages['account.accountCode']}" />
					</p:paragraph>
				</p:cell>

				<p:cell horizontalAlignment="center">
					<p:paragraph>
						<p:text value="#{messages['account.accountName']}" />
					</p:paragraph>
				</p:cell>

				<p:cell horizontalAlignment="center">
					<p:paragraph>
						<p:text value="#{messages['money.value']}" />
					</p:paragraph>
				</p:cell>

			</p:font>

			<p:font size="6" style="bold">
				<ui:repeat value="#{workdayHome.replacementAccountDTOs}"
					var="_account">
					<p:cell>
						<p:paragraph>
							<p:text value="#{_account.accountcode}" />
						</p:paragraph>
					</p:cell>

					<p:cell>
						<p:paragraph>
							<p:text value="#{_account.accountname}" />
						</p:paragraph>
					</p:cell>

					<p:cell horizontalAlignment="right">
						<p:paragraph>
							<p:text value="#{_account.total}">
								<f:convertNumber pattern="$ ####.00" />
							</p:text>
						</p:paragraph>
					</p:cell>

				</ui:repeat>
			</p:font>
		</p:table>
	
	
	
	
	
	
</p:document>