<p:document xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://jboss.org/schema/seam/pdf"
	xmlns:e="http://jboss.org/schema/seam/excel"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:s="http://jboss.org/schema/seam/taglib"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:a4j="http://richfaces.org/a4j"
	title="#{messages['notifications']}" subject="report" type="pdf"
	size="A5" margins="40 20 30 20" keywords="mykeyword" author="jlgranda"
	creator="loxageek">

	<f:facet name="header">
		<p:font size="7" name="HELVETICA">
			<p:header borderWidthTop="0" borderWidthBottom="0" alignment="center">
				<p:paragraph>
					<p:table columns="3" widthPercentage="100" spacingAfter="15"
						widths="1 5 2">
						<f:facet name="defaultCell">
							<p:cell borderWidth="0" />
						</f:facet>
						<p:cell>
							<p:image value="#{gim.institution.logo}" alignment="center" widht="1" height="1">
                                <s:transformImageSize height="70" maintainRatio="true"/>
                            </p:image>
                        </p:cell>
						<p:cell>
							<p:font size="8" style="bold">
								<p:paragraph alignment="center">#{gim.institution.name.toUpperCase()}</p:paragraph>
							</p:font>

							<p:font size="7" style="bold">
								<p:paragraph alignment="center">#{gim.institution.address}. #{messages['institution.phone']}: #{gim.institution.phone} -  #{messages['institution.fax']}: #{gim.institution.fax}</p:paragraph>
							</p:font>

							<p:font size="8" style="bold">
								<p:paragraph alignment="center">#{messages['DIRECCION FINANCIERA']}</p:paragraph>
							</p:font>

							<p:font size="8" style="bold">
								<p:paragraph alignment="center">#{messages['creditNoteReport']}</p:paragraph>
							</p:font>
						</p:cell>
						<p:cell>
							<p:paragraph alignment="right" spacingAfter="10">
								<p:font size="10" name="HELVETICA">
									<p:text value="#{messages['Loja']}," />
									<p:text value="#{currentDatetime}">
										<f:convertDateTime
											pattern="#{messages['common.dateFullTimePattern']}" />
									</p:text>
								</p:font>
							</p:paragraph>
						</p:cell>

						<p:cell></p:cell>

					</p:table>
				</p:paragraph>
			</p:header>
			<p:footer borderWidthTop="1" borderColorTop="blue"
				borderWidthBottom="0" alignment="center">
	 			[<p:pageNumber />]
			</p:footer>
		</p:font>
	</f:facet>

	<p:font size="10" name="HELVETICA">

		<p:paragraph alignment="left">
			<p:font size="12" style="bold" name="HELVETICA">
				<p:text value="#{messages['common.incharge']}: " />
			</p:font>
			<p:font size="12" name="HELVETICA">
				<p:text value="#{userSession.user.resident.name}"/>
			</p:font>
		</p:paragraph>

		<p:paragraph alignment="left">
			<p:font size="12" style="bold" name="HELVETICA">
				<p:text value="#{messages['creditNote.startDate']}: " />
			</p:font>
			<p:font size="12" name="HELVETICA">
				<p:text value="#{creditNoteHome.startDate}">
					<f:convertDateTime pattern="#{messages['common.datePattern']}" />
				</p:text>
			</p:font>
		</p:paragraph>

		<p:paragraph alignment="left">
			<p:font size="12" style="bold" name="HELVETICA">
				<p:text value="#{messages['creditNote.endDate']}: " />
			</p:font>
			<p:font size="12" name="HELVETICA">
				<p:text value="#{creditNoteHome.endDate}">
					<f:convertDateTime pattern="#{messages['common.datePattern']}" />
				</p:text>
			</p:font>
		</p:paragraph>

		<p:paragraph alignment="left">
			<p:font size="12" style="bold" name="HELVETICA">
				<p:text value="#{messages['creditNote.amountGenerated']}: " />
			</p:font>
			<p:font size="12" name="HELVETICA">
				<p:text value="#{creditNoteHome.amountGenerated}" />
			</p:font>
		</p:paragraph>
		<p:paragraph alignment="left">
			<p:font size="12" style="bold" name="HELVETICA">
				<p:text value="#{messages['creditNote.availableAmount']}: " />
			</p:font>
			<p:font size="12" name="HELVETICA">
				<p:text value="#{creditNoteHome.amountAvailable}" />
			</p:font>
		</p:paragraph>



		<p:table columns="5" widthPercentage="100" spacingBefore="15"
			widths="1 3 1 1 1" rendered="#{!creditNoteHome.detailreport}">
			<f:facet name="defaultCell">
				<p:cell borderWidth="1" />
			</f:facet>

			<p:cell horizontalAlignment="center" grayFill="0.90">
				<p:paragraph spacingAfter="2">
					<p:font size="11" style="bold" name="HELVETICA">
						<p:text value="#{messages['creditNote.id']}" />
					</p:font>
				</p:paragraph>
			</p:cell>
			<p:cell horizontalAlignment="center" grayFill="0.90">
				<p:paragraph spacingAfter="2">
					<p:font size="11" style="bold" name="HELVETICA">
						<p:text value="#{messages['common.resident']}" />
					</p:font>
				</p:paragraph>
			</p:cell>
			<p:cell horizontalAlignment="center" grayFill="0.90">
				<p:paragraph spacingAfter="2">
					<p:font size="11" style="bold" name="HELVETICA">
						<p:text value="#{messages['creditNote.date']}" />
					</p:font>
				</p:paragraph>
			</p:cell>
			<p:cell horizontalAlignment="center" grayFill="0.90">
				<p:paragraph spacingAfter="2">
					<p:font size="11" style="bold" name="HELVETICA">
						<p:text value="#{messages['creditNote.value']}" />
					</p:font>
				</p:paragraph>
			</p:cell>

			<p:cell horizontalAlignment="center" grayFill="0.90">
				<p:paragraph spacingAfter="2">
					<p:font size="11" style="bold" name="HELVETICA">
						<p:text value="#{messages['creditNote.availableAmount']}" />
					</p:font>
				</p:paragraph>
			</p:cell>

			<ui:repeat value="#{creditNoteHome.creditNotes}" var="_creditNote">

				<p:cell horizontalAlignment="right">
					<p:paragraph horizontalAlignment="right">

					</p:paragraph>
				</p:cell>

				<p:cell>
					<p:paragraph>
						<p:text value="#{_creditNote.resident.name}" />
					</p:paragraph>
				</p:cell>

				<p:cell horizontalAlignment="center">
					<p:paragraph>
						<p:text value="#{_creditNote.date}">
							<f:convertDateTime pattern="#{messages['common.datePattern']}" />
						</p:text>
					</p:paragraph>
				</p:cell>

				<p:cell horizontalAlignment="right">
					<p:paragraph>
						<p:text value="#{_creditNote.value}" />
					</p:paragraph>
				</p:cell>

				<p:cell horizontalAlignment="right">
					<p:paragraph>
						<p:text value="#{_creditNote.availableAmount}" />
					</p:paragraph>
				</p:cell>

			</ui:repeat>

		</p:table>

		<ui:repeat value="#{creditNoteHome.creditNotes}" var="_creditNote">

			<p:table columns="1" widthPercentage="100" spacingBefore="15"
				rendered="#{creditNoteHome.detailreport}">
				<f:facet name="defaultCell">
					<p:cell borderWidth="0" />
				</f:facet>

				<p:cell horizontalAlignment="left" grayFill="0.90">
					<p:paragraph spacingAfter="2">
						<p:font size="11" style="bold" name="HELVETICA">
							<p:text value="#{messages['creditNote.id']}: " />
							<p:text value="#{_creditNote.id}" />
						</p:font>
					</p:paragraph>
				</p:cell>
				<p:cell horizontalAlignment="left" grayFill="0.90">
					<p:paragraph spacingAfter="2">
						<p:font size="11" style="bold" name="HELVETICA">
							<p:text value="#{messages['common.resident']}: " />
							<p:text value="#{_creditNote.resident.name}" />
						</p:font>
					</p:paragraph>
				</p:cell>
				<p:cell horizontalAlignment="left" grayFill="0.90">
					<p:paragraph spacingAfter="2">
						<p:font size="11" style="bold" name="HELVETICA">
							<p:text value="#{messages['creditNote.date']}: " />
							<p:text value="#{_creditNote.date}">
								<f:convertDateTime pattern="#{messages['common.datePattern']}" />
							</p:text>
						</p:font>
					</p:paragraph>
				</p:cell>
				<p:cell horizontalAlignment="left" grayFill="0.90">
					<p:paragraph spacingAfter="2">
						<p:font size="11" style="bold" name="HELVETICA">
							<p:text value="#{messages['creditNote.value']}: " />
							<p:text value="#{_creditNote.value}" />
						</p:font>
					</p:paragraph>
				</p:cell>

				<p:cell horizontalAlignment="left" grayFill="0.90">
					<p:paragraph spacingAfter="2">
						<p:font size="11" style="bold" name="HELVETICA">
							<p:text value="#{messages['creditNote.availableAmount']}: " />
							<p:text value="#{_creditNote.availableAmount}" />
						</p:font>
					</p:paragraph>
				</p:cell>
			</p:table>

			<p:table columns="5" widthPercentage="100"
				horizontalAlignment="right" spacingAfter="15" widths="1 3 1 1 1"
				rendered="#{creditNoteHome.detailreport}">
				<f:facet name="defaultCell">
					<p:cell borderWidth="1" />
				</f:facet>

				<p:cell horizontalAlignment="center" grayFill="0.95">
					<p:paragraph spacingAfter="2">
						<p:font size="11" style="bold" name="HELVETICA">
							<p:text value="#{messages['municipalBond.id']}" />
						</p:font>
					</p:paragraph>
				</p:cell>
				<p:cell horizontalAlignment="center" grayFill="0.95">
					<p:paragraph spacingAfter="2">
						<p:font size="11" style="bold" name="HELVETICA">
							<p:text value="#{messages['entry']}" />
						</p:font>
					</p:paragraph>
				</p:cell>
				<p:cell horizontalAlignment="center" grayFill="0.95">
					<p:paragraph spacingAfter="2">
						<p:font size="11" style="bold" name="HELVETICA">
							<p:text value="#{messages['municipalBond.emision']}" />
						</p:font>
					</p:paragraph>
				</p:cell>
				<p:cell horizontalAlignment="center" grayFill="0.95">
					<p:paragraph spacingAfter="2">
						<p:font size="11" style="bold" name="HELVETICA">
							<p:text value="#{messages['municipalBond.expiration']}" />
						</p:font>
					</p:paragraph>
				</p:cell>

				<p:cell horizontalAlignment="center" grayFill="0.95">
					<p:paragraph spacingAfter="2">
						<p:font size="11" style="bold" name="HELVETICA">
							<p:text value="#{messages['municipalBond.value']}" />
						</p:font>
					</p:paragraph>
				</p:cell>

				<ui:repeat value="#{_creditNote.municipalBonds}" var="_mun">
					<p:cell horizontalAlignment="right">
						<p:paragraph horizontalAlignment="right">
							<p:text value="#{_mun.id} " />
						</p:paragraph>
					</p:cell>

					<p:cell>
						<p:paragraph>
							<p:text value="#{_mun.entry.name}" />
						</p:paragraph>
					</p:cell>

					<p:cell horizontalAlignment="center">
						<p:paragraph>
							<p:text value="#{_mun.emisionDate}">
								<f:convertDateTime pattern="#{messages['common.datePattern']}" />
							</p:text>
						</p:paragraph>
					</p:cell>

					<p:cell horizontalAlignment="center">
						<p:paragraph>
							<p:text value="#{_mun.expirationDate}">
								<f:convertDateTime pattern="#{messages['common.datePattern']}" />
							</p:text>
						</p:paragraph>
					</p:cell>

					<p:cell horizontalAlignment="right">
						<p:paragraph>
							<p:text value="#{_mun.value}" />
						</p:paragraph>
					</p:cell>

				</ui:repeat>

			</p:table>


		</ui:repeat>

		<p:font size="11" style="bold" name="HELVETICA">

			<p:table columns="5" widthPercentage="100"
				horizontalAlignment="right" spacingAfter="15" widths="1 3 1 1 1"
				rendered="#{!creditNoteHome.detailreport}">

				<f:facet name="defaultCell">
					<p:cell borderWidth="1" />
				</f:facet>

				<p:cell borderWidth="0" />

				<p:cell borderWidth="0" />

				<p:cell horizontalAlignment="center">
					<p:paragraph>
						<p:text value="#{messages['item.total']}" />
					</p:paragraph>
				</p:cell>

				<p:cell horizontalAlignment="right">
					<p:paragraph>
						<p:text value="#{creditNoteHome.amountGenerated}" />
					</p:paragraph>
				</p:cell>
				<p:cell horizontalAlignment="right">
					<p:paragraph>
						<p:text value="#{creditNoteHome.amountAvailable}" />
					</p:paragraph>
				</p:cell>
			</p:table>

		</p:font>


	</p:font>


</p:document>
